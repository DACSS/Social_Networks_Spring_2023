{
  "hash": "660bc4bfdb1e949838023e611e75015e",
  "result": {
    "markdown": "---\ntitle: \"Week 4 Challenge\"\nauthor: \"Quinn He\"\ndescription: \"Centrality of a Network\"\ndate: \"03/29/2023\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\n# editor: visual\ncategories: \n  - challenge_4\n  \n---\n\n\n\n\n## Challenge Overview\n\nDescribe the many measures of centrality of at least one network of your choice.\n\n\n\n\nFor this challenge I am using the Florentine family business data set. This includes financial ties like loans, credits, partnerships, etc.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(florentine)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nflorb <- graph_from_data_frame(flobusiness, directed = TRUE)\n```\n:::\n\n\nBased on the edge and vertex count, I see the network is quite small, but I expect this since the network of the Florentine family's business ties is close knit and there are not many families in this well connected network.\n\n::: {.cell}\n\n```{.r .cell-code}\nvcount(florb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 11\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\necount(florb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 15\n```\n:::\n:::\n\n\nThe network is also both not bipartite and not weighted. \n\n::: {.cell}\n\n```{.r .cell-code}\nis_bipartite(florb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\nis_weighted(florb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] FALSE\n```\n:::\n\n```{.r .cell-code}\nis_directed(florb)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\nBefore creating the basic data frame for the business network, let's get a visual sense of the network we are looking at.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(florb,\n     layout = layout_components(florb),\n     edge.arrow.mode = 2,\n     vertex.label.font = 1,\n     main = \"Florentine family business ties\")\n```\n\n::: {.cell-output-display}\n![](Week4_Challenge_QuinnHe_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\nThe Peruzzi, Lamberteschi, and Barbadori families all appear to conduct the most business with other families. The Medicis are essentially an intermediary for the Pazzi, Tornabuoni, and Salviati families. In this case, I would argue the Barbadori's are the most powerful because they are appear to be sending loans, credit, etc. out to four families, while receiving none. \n\nBelow is the data frame that contains the information on the in/outdegree measurements for each of the the families. Based on the global transitivity scores, the network is pretty well connected just above 40% of connected triples in the network.\n\n::: {.cell}\n\n```{.r .cell-code}\nflorb.nodes <- data.frame(\n  totdegree = igraph::degree(florb),\n  indegree = igraph::degree(florb, mode = \"in\", loops = F),\n  outdegree = igraph::degree(florb, mode = \"out\", loops = F),\n  globtrans = igraph::transitivity(florb, type = \"global\"),\n  avgtrans = igraph::transitivity(florb, type = \"average\")\n)\n```\n:::\n\n\n\n## Centrality\n\nCompute at least one measure of centrality for each node, adding them as attributes to `nodes` in the form of extra columns: eigencentrality, betweenness, closeness, etc. Compute the distribution of at least one of those measures. What do we learn from comparing these measures of centrality with an equivalent random network (i.e. with the same number of edges and vertices)?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflorb.in.central <- centr_degree(florb, loops = FALSE, mode = \"in\")\n\nflorb.out.central <- centr_degree(florb, loops = FALSE, mode = \"out\")\n\nflorb.total.central <- centr_degree(florb, loops = FALSE, mode = \"total\")\n```\n:::\n\n\n\nBelow I add columns of eigenvector centrality measure, betweeness centrality, and closeness centrality\n\n::: {.cell}\n\n```{.r .cell-code}\nflorb.nodes$eigen <- eigen_centrality(florb)$vector\n\nflorb.nodes$between <- igraph::betweenness(florb, directed = F)\n\nflorb.nodes$close <- igraph::closeness(florb, mode = \"out\")\n```\n:::\n\n\nBetweenness measures essentially how important a node is within the context of the network. A node with a high betweenness score indicates it lies on the path of connection to many other nodes. It has a high awareness of what is going on in similar circles. Based on the visualization, the Barbadoris are in between two major clusters of families, almost acting as a bridge between the various nodes. \n\nThe Medici family fills a similar role, acting as the only connection the Pazzi, Salviati, and Tornabuoni families have to the rest of the network. \n\n::: {.cell}\n\n```{.r .cell-code}\nflorb.nodes\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n             totdegree indegree outdegree globtrans  avgtrans     eigen between\nBarbadori            4        0         4 0.4166667 0.5958333 0.8289579    25.0\nBischeri             3        0         3 0.4166667 0.5958333 0.7310627     2.5\nCastellani           3        1         2 0.4166667 0.5958333 0.8305427     5.0\nGinori               2        1         1 0.4166667 0.5958333 0.4046458     0.0\nGuadagni             2        1         1 0.4166667 0.5958333 0.4992669     0.0\nLamberteschi         4        3         1 0.4166667 0.5958333 0.9235790     6.0\nMedici               5        2         3 0.4166667 0.5958333 0.5120959    24.0\nPeruzzi              4        4         0 0.4166667 0.5958333 1.0000000    13.5\nPazzi                1        1         0 0.4166667 0.5958333 0.1545184     0.0\nSalviati             1        1         0 0.4166667 0.5958333 0.1545184     0.0\nTornabuoni           1        1         0 0.4166667 0.5958333 0.1545184     0.0\n                  close\nBarbadori    0.08333333\nBischeri     0.33333333\nCastellani   0.50000000\nGinori       0.14285714\nGuadagni     0.33333333\nLamberteschi 1.00000000\nMedici       0.33333333\nPeruzzi             NaN\nPazzi               NaN\nSalviati            NaN\nTornabuoni          NaN\n```\n:::\n:::\n\n\n\n\nHere is the distribution of the eigenvector centrality, closeness centrality, and betweenness for the florentine families business network. Since the network is small, most of the nodes are well connected, but there are a few with low eigenvector centrality, which would show that some nodes are not influential to many others in the network. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nhist(florb.nodes$eigen)\n```\n\n::: {.cell-output-display}\n![](Week4_Challenge_QuinnHe_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\nMost nodes are well spread out around the network, with only a small amount possessing a large closeness score. \n\n::: {.cell}\n\n```{.r .cell-code}\nhist(florb.nodes$close)\n```\n\n::: {.cell-output-display}\n![](Week4_Challenge_QuinnHe_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\nThis histogram shows that most nodes have a low betweenness centrality, but a few nodes have over 20 connections. The nodes with a high value of betweenness indicate they are highly influential within the network. \n\n::: {.cell}\n\n```{.r .cell-code}\nhist(florb.nodes$between)\n```\n\n::: {.cell-output-display}\n![](Week4_Challenge_QuinnHe_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Week4_Challenge_QuinnHe_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}