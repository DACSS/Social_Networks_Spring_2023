<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Claire Battaglia">
<meta name="dcterms.date" content="2023-05-20">

<title>The Local Food System in Missoula, Montana</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta name="twitter:title" content="The Local Food System in Missoula, Montana">
<meta name="twitter:description" content="A Network Analysis">
<meta name="twitter:image" content="https://dacss.github.io/Social_Networks_Spring_2023/posts/ClaireBattaglia_FinalProject_files/figure-html/centrality-1.png">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:site" content="@UMassDACSS">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/UMass White Wordmark Horiz.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/Social_Networks_Spring_2023/" rel="" target="">
 <span class="menu-text">Spring 2023 Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">Contributors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss" rel="" target="">
 <span class="menu-text">DACSS</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://dacss.github.io/Social_Networks_Spring_2023/" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#research-question-hypotheses" id="toc-research-question-hypotheses" class="nav-link" data-scroll-target="#research-question-hypotheses">Research Question &amp; Hypotheses</a></li>
  <li><a href="#methods-data" id="toc-methods-data" class="nav-link" data-scroll-target="#methods-data">Methods &amp; Data</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#hypothesis-testing" id="toc-hypothesis-testing" class="nav-link" data-scroll-target="#hypothesis-testing">Hypothesis Testing</a></li>
  </ul></li>
  <li><a href="#network-structure-statistics" id="toc-network-structure-statistics" class="nav-link" data-scroll-target="#network-structure-statistics">Network Structure &amp; Statistics</a></li>
  <li><a href="#centrality" id="toc-centrality" class="nav-link" data-scroll-target="#centrality">Centrality</a></li>
  <li><a href="#network-visualization" id="toc-network-visualization" class="nav-link" data-scroll-target="#network-visualization">Network Visualization</a></li>
  <li><a href="#community-detection" id="toc-community-detection" class="nav-link" data-scroll-target="#community-detection">Community Detection</a>
  <ul class="collapse">
  <li><a href="#fast-and-greedy" id="toc-fast-and-greedy" class="nav-link" data-scroll-target="#fast-and-greedy">Fast and Greedy</a></li>
  <li><a href="#walktrap" id="toc-walktrap" class="nav-link" data-scroll-target="#walktrap">Walktrap</a></li>
  <li><a href="#leading-label-propagation" id="toc-leading-label-propagation" class="nav-link" data-scroll-target="#leading-label-propagation">Leading Label Propagation</a></li>
  </ul></li>
  <li><a href="#hypothesis-testing-1" id="toc-hypothesis-testing-1" class="nav-link" data-scroll-target="#hypothesis-testing-1">Hypothesis Testing</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">The Local Food System in Missoula, Montana</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
<p class="subtitle lead">A Network Analysis</p>
  <div class="quarto-categories">
    <div class="quarto-category">Claire Battaglia</div>
    <div class="quarto-category">final project</div>
    <div class="quarto-category">local food systems</div>
    <div class="quarto-category">network analysis</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Claire Battaglia </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 20, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>Interest in locally produced food has grown significantly over the years, as evidenced by the expansion of local food systems in regions across the United States. Yet while some have become incredibly robust—weathering closures during COVID with ease and even capitalizing on the opportunities presented by the disruption to the conventional food system—others have faltered and stalled. Why? What makes a food system successful and resilient?</p>
<p>Network analysis offers a unique opportunity to understand food systems <em>as networks</em>, allowing us to identify network features that are determinants of food system success and resilience.</p>
<p>Identifying these features requires the analysis of many, many local food systems as networks, which is beyond the scope of this project. This analysis, then, will serve as a first step by developing a framework for analysis that can be replicated with other food systems in the future.</p>
</section>
<section id="research-question-hypotheses" class="level2">
<h2 class="anchored" data-anchor-id="research-question-hypotheses">Research Question &amp; Hypotheses</h2>
<p>What are the network determinants of success and resilience for local food systems?</p>
<p>H₁: How a network is formed is a determinant of success/resilience.</p>
<p>H₂: Network size is a determinant of success/resilience.</p>
<p>H₃: The category of entity (i.e.&nbsp;producer, processor, distributor, retailer) with the highest degree centralization is a determinant of success/resilience.</p>
<p>H₄: The category of entity (i.e.&nbsp;producer, processor, distributor, retailer) with the highest betweenness centralization is a determinant of success/resilience.</p>
<p>Testing these hypotheses will not be possible until I have analyzed data from enough networks to build a model in which these features are the predictor variables and food system success and resilience are the outcome variables. For this project, then, I will explore the aforementioned measures and test the following hypotheses pertaining to network formation:</p>
<p>H₁: The degree centralization is different than what we would expect if this network were formed by chance.</p>
<p>H₂: The betweenness centralization is different than what we would expect if this network were formed by chance.</p>
</section>
<section id="methods-data" class="level2">
<h2 class="anchored" data-anchor-id="methods-data">Methods &amp; Data</h2>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>All data were collected by me and compiled into a node list and edge list.</p>
<p>A node is any entity along the local food supply chain: producer, processor, distributor, retailer.</p>
<p>A tie represents that goods are flowing between two entities. It is a binary classification and does not indicate the type or volume of goods flowing.</p>
<p>I used the <a href="https://abundantmontana.com/">Abundant Montana Local Food Guide</a>, Google Maps, websites of known entities, and field identification and verification to compile both the node and edge list.</p>
</section>
<section id="hypothesis-testing" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis-testing">Hypothesis Testing</h3>
<p>I will perform a CUG-test to test my hypotheses about network formation.</p>
</section>
</section>
<section id="network-structure-statistics" class="level2">
<h2 class="anchored" data-anchor-id="network-structure-statistics">Network Structure &amp; Statistics</h2>
<p>I’ll begin by reading in my data and transforming it into a network object.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"food_system_network - nodelist.csv"</span>, <span class="at">header =</span> T, <span class="at">as.is =</span> T)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"food_system_network - edgelist.csv"</span>, <span class="at">header =</span> T, <span class="at">as.is =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># preview</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodes, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 node node_attribute node_attribute_subtype   color
1 Bison and Bee Honey       producer     specialty products #714466
2 Clark Fork Organics       producer        general produce #714466
3    County Rail Farm       producer        general produce #714466
4         Deluge Farm       producer        general produce #714466
5        Dixon Melons       producer        general produce #714466</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(links, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 from                                  to
1 Bison and Bee Honey Western Montana Growers Cooperative
2   Charlie's Produce                     Good Food Store
3   Charlie's Produce                    Natural Grocer's
4 Clark Fork Organics Western Montana Growers Cooperative
5 Clark Fork Organics             Missoula Farmers Market</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create network object - igraph</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>net <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d =</span> links, <span class="at">vertices =</span> nodes, <span class="at">directed =</span> T)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(net)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "igraph"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(net)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 42d8915 DN-- 53 64 -- 
+ attr: name (v/c), node_attribute (v/c), node_attribute_subtype (v/c),
| color (v/c)
+ edges from 42d8915 (vertex names):
[1] Bison and Bee Honey-&gt;Western Montana Growers Cooperative
[2] Charlie's Produce  -&gt;Good Food Store                    
[3] Charlie's Produce  -&gt;Natural Grocer's                   
[4] Clark Fork Organics-&gt;Western Montana Growers Cooperative
[5] Clark Fork Organics-&gt;Missoula Farmers Market            
[6] Clark Fork Organics-&gt;Good Food Store                    
[7] County Rail Farm   -&gt;Clark Fork Market                  
+ ... omitted several edges</code></pre>
</div>
</div>
<p>This network is <em>directed</em>, <em>named</em>, and contains 53 nodes and 64 ties. It is unweighted, meaning that each tie represents that goods are flowing but does not convey any other information, such as the type or volume of goods.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calc density</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(net)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02322206</code></pre>
</div>
</div>
<p>The density of this network appears to be extremely low, although until I have data from other food system networks I can’t know whether it is low for <em>this type of network.</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dyad census</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">dyad.census</span>(net)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$mut
[1] 0

$asym
[1] 64

$null
[1] 1314</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># triad census</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">triad.census</span>(net)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 21081  1433     0    24   739   142     0     0     7     0     0     0
[13]     0     0     0     0</code></pre>
</div>
</div>
<p>There are 0 mutual ties. That is, there are no node pairs who exchange goods with one another—all 64 ties are asymmetrical. There are 1,314 null ties, meaning that for those node pairs there is no flow of goods at all. This is not surprising, as most producers do not sell their products to other producers but to distributors or retailers. And while distributors and retailers purchase from producers, they do not typically sell any products to them.</p>
<p>I have included the censuses as a point of comparison between food system networks as I continue this project but, given the nature of ties between nodes in a food supply chain, dyads and triads might not be as useful in evaluating supply chain networks as they are in evaluating other types of networks.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get number of components</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(net)<span class="sc">$</span>no</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get size of components</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(net)<span class="sc">$</span>csize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 46  1  1  1  1  1  1  1</code></pre>
</div>
</div>
<p>This network has 8 components, one of which contains 46 nodes and 7 isolates.</p>
</section>
<section id="centrality" class="level2">
<h2 class="anchored" data-anchor-id="centrality">Centrality</h2>
<p>The measure of status that I am interested in is degree centrality (both in/out, as this is a directed network). Degree centrality—the number of nodes to which the focal node is connected—is important in the context of a food system because entities with high degree centrality likely have significant influence within the system. In price setting, for example. In comparing local food systems to one another, degree distribution will likely be relevant, as well as which type of entity has the highest degree centrality.</p>
<p>The measure of power that I am interested in is betweenness centrality. This measure is extremely important to consider when thinking about resilience because entities with high betweenness centrality are likely critical to the system’s ability to withstand shock. As with degree centrality, the distribution and type of entity with the highest betweenness centrality will likely be important when comparing local food systems.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe of node degrees and betweenness</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>net_nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">V</span>(net)<span class="sc">$</span>name, <span class="at">degree =</span> <span class="fu">degree</span>(net)) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">indegree =</span> <span class="fu">degree</span>(net, <span class="at">mode =</span> <span class="st">"in"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">outdegree =</span> <span class="fu">degree</span>(net, <span class="at">mode =</span> <span class="st">"out"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">between =</span> <span class="fu">betweenness</span>(net))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(net_nodes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                           name
Bison and Bee Honey                                         Bison and Bee Honey
Clark Fork Organics                                         Clark Fork Organics
County Rail Farm                                               County Rail Farm
Deluge Farm                                                         Deluge Farm
Dixon Melons                                                       Dixon Melons
Dude's Organic Farm                                         Dude's Organic Farm
Elk Creek Colony                                               Elk Creek Colony
Five Fox Farm                                                     Five Fox Farm
Flathead Lake Cheese Co.                               Flathead Lake Cheese Co.
Foothill Farm                                                     Foothill Farm
Forbidden Fruit Orchard                                 Forbidden Fruit Orchard
Fourth Wave Farm                                               Fourth Wave Farm
Fresh Roots Farm                                               Fresh Roots Farm
Ginger Roots Farm                                             Ginger Roots Farm
Glacier Tilth Farm                                           Glacier Tilth Farm
Good Steward Farm                                             Good Steward Farm
Green Blade Farm                                               Green Blade Farm
Harlequin Organic Produce                             Harlequin Organic Produce
Hilltop Haven                                                     Hilltop Haven
Home Acres Orchard                                           Home Acres Orchard
Lifeline Farm                                                     Lifeline Farm
Lifeline Produce                                               Lifeline Produce
Lowdown Farm                                                       Lowdown Farm
Mission Mountain Organic Eggs                     Mission Mountain Organic Eggs
Moss Farm                                                             Moss Farm
Mother Fungi                                                       Mother Fungi
Mountain Spring Farm                                       Mountain Spring Farm
Paradise Gardens                                               Paradise Gardens
Ploughshare Farm                                               Ploughshare Farm
Ramrock Orchard                                                 Ramrock Orchard
Sophie's Farm                                                     Sophie's Farm
Spencer's Valley View Farm                           Spencer's Valley View Farm
Sweet Root Farm                                                 Sweet Root Farm
The Orchard at Flathead Lake                       The Orchard at Flathead Lake
Timeless Seeds, Inc.                                       Timeless Seeds, Inc.
Wild Plum Farm                                                   Wild Plum Farm
Wustner Brothers Honey                                   Wustner Brothers Honey
Albertsons                                                           Albertsons
Charlie's Produce                                             Charlie's Produce
Clark Fork Market                                             Clark Fork Market
Costco                                                                   Costco
Good Food Store                                                 Good Food Store
Mission Mountain Food Enterprise Center Mission Mountain Food Enterprise Center
Missoula Farmers Market                                 Missoula Farmers Market
Natural Grocer's                                               Natural Grocer's
Orange Street Food Farm                                 Orange Street Food Farm
Pattee Creek Market                                         Pattee Creek Market
Roasauers                                                             Roasauers
Target                                                                   Target
Walmart Supercenter                                         Walmart Supercenter
Western Montana Growers Cooperative         Western Montana Growers Cooperative
WinCo                                                                     WinCo
Yoke's Fresh Market                                         Yoke's Fresh Market
                                        degree indegree outdegree between
Bison and Bee Honey                          1        0         1     0.0
Clark Fork Organics                          3        0         3     0.0
County Rail Farm                             2        0         2     0.0
Deluge Farm                                  1        0         1     0.0
Dixon Melons                                 3        0         3     0.0
Dude's Organic Farm                          1        0         1     0.0
Elk Creek Colony                             1        0         1     0.0
Five Fox Farm                                1        0         1     0.0
Flathead Lake Cheese Co.                     3        0         3     0.0
Foothill Farm                                1        0         1     0.0
Forbidden Fruit Orchard                      2        0         2     0.0
Fourth Wave Farm                             1        0         1     0.0
Fresh Roots Farm                             1        0         1     0.0
Ginger Roots Farm                            1        0         1     0.0
Glacier Tilth Farm                           1        0         1     0.0
Good Steward Farm                            1        0         1     0.0
Green Blade Farm                             1        0         1     0.0
Harlequin Organic Produce                    2        0         2     0.0
Hilltop Haven                                1        0         1     0.0
Home Acres Orchard                           2        0         2     0.0
Lifeline Farm                                2        0         2     0.0
Lifeline Produce                             3        0         3     0.0
Lowdown Farm                                 1        0         1     0.0
Mission Mountain Organic Eggs                2        0         2     0.0
Moss Farm                                    1        0         1     0.0
Mother Fungi                                 2        0         2     0.0
Mountain Spring Farm                         1        0         1     0.0
Paradise Gardens                             2        0         2     0.0
Ploughshare Farm                             2        0         2     0.0
Ramrock Orchard                              1        0         1     0.0
Sophie's Farm                                2        0         2     0.0
Spencer's Valley View Farm                   2        0         2     0.0
Sweet Root Farm                              1        0         1     0.0
The Orchard at Flathead Lake                 1        0         1     0.0
Timeless Seeds, Inc.                         2        0         2     0.0
Wild Plum Farm                               1        0         1     0.0
Wustner Brothers Honey                       1        0         1     0.0
Albertsons                                   0        0         0     0.0
Charlie's Produce                            2        0         2     0.0
Clark Fork Market                            4        4         0     0.0
Costco                                       0        0         0     0.0
Good Food Store                             10       10         0     0.0
Mission Mountain Food Enterprise Center      2        1         1     0.5
Missoula Farmers Market                      8        8         0     0.0
Natural Grocer's                             2        2         0     0.0
Orange Street Food Farm                      1        1         0     0.0
Pattee Creek Market                          1        1         0     0.0
Roasauers                                    0        0         0     0.0
Target                                       0        0         0     0.0
Walmart Supercenter                          0        0         0     0.0
Western Montana Growers Cooperative         41       37         4   140.5
WinCo                                        0        0         0     0.0
Yoke's Fresh Market                          0        0         0     0.0</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get summary</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(net_nodes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     name               degree          indegree        outdegree    
 Length:53          Min.   : 0.000   Min.   : 0.000   Min.   :0.000  
 Class :character   1st Qu.: 1.000   1st Qu.: 0.000   1st Qu.:1.000  
 Mode  :character   Median : 1.000   Median : 0.000   Median :1.000  
                    Mean   : 2.415   Mean   : 1.208   Mean   :1.208  
                    3rd Qu.: 2.000   3rd Qu.: 0.000   3rd Qu.:2.000  
                    Max.   :41.000   Max.   :37.000   Max.   :4.000  
    between      
 Min.   :  0.00  
 1st Qu.:  0.00  
 Median :  0.00  
 Mean   :  2.66  
 3rd Qu.:  0.00  
 Max.   :140.50  </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "distributions.png") # save as png</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># plot in-deg dist</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(net_nodes<span class="sc">$</span>indegree, <span class="at">col =</span> <span class="st">"#714466"</span>, <span class="at">main =</span> <span class="st">"In-degree Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Number of entities from which goods are received"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># plot out-deg dist</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(net_nodes<span class="sc">$</span>outdegree, <span class="at">col =</span> <span class="st">"#714466"</span>, <span class="at">main =</span> <span class="st">"Out-degree Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Number of entities to which goods are sent"</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># plot betweenness</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(net_nodes<span class="sc">$</span>between, <span class="at">col =</span> <span class="st">"#714466"</span>, <span class="at">main =</span> <span class="st">"Betweenness Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Betweenness"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/centrality-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can see that using both degree centrality and betweenness centrality, the Western Montana Growers Cooperative is the most important individual entity in the network. Moreover, we can also see that the network is extremely uneven in that there is only one entity with high degree and high betweenness centrality.</p>
</section>
<section id="network-visualization" class="level2">
<h2 class="anchored" data-anchor-id="network-visualization">Network Visualization</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "network.png") # save as png</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/network plot-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can see in the above plot that the Western Montana Growers Cooperative (in blue) is, indeed, the node with the highest degree centrality and the highest betweenness centrality. We can also easily identify the isolates, all of which are large food retailers. It’s important to note that they are only isolates in the <em>local</em> food setting.</p>
</section>
<section id="community-detection" class="level2">
<h2 class="anchored" data-anchor-id="community-detection">Community Detection</h2>
<p>I’ll use several methods of detecting communities within a network, beginning with the fast and greedy method, and then compare them.</p>
<section id="fast-and-greedy" class="level3">
<h3 class="anchored" data-anchor-id="fast-and-greedy">Fast and Greedy</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fast and greedy</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>net_fg <span class="ot">&lt;-</span> <span class="fu">cluster_fast_greedy</span>(<span class="fu">as.undirected</span>(net))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># get groups</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">groups</span>(net_fg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$`1`
 [1] "Home Acres Orchard"                     
 [2] "Lifeline Farm"                          
 [3] "Mission Mountain Organic Eggs"          
 [4] "Mother Fungi"                           
 [5] "Spencer's Valley View Farm"             
 [6] "Timeless Seeds, Inc."                   
 [7] "Charlie's Produce"                      
 [8] "Good Food Store"                        
 [9] "Mission Mountain Food Enterprise Center"
[10] "Natural Grocer's"                       

$`2`
 [1] "Bison and Bee Honey"                 "Deluge Farm"                        
 [3] "Dude's Organic Farm"                 "Elk Creek Colony"                   
 [5] "Five Fox Farm"                       "Foothill Farm"                      
 [7] "Fourth Wave Farm"                    "Fresh Roots Farm"                   
 [9] "Ginger Roots Farm"                   "Glacier Tilth Farm"                 
[11] "Good Steward Farm"                   "Green Blade Farm"                   
[13] "Hilltop Haven"                       "Lowdown Farm"                       
[15] "Moss Farm"                           "Mountain Spring Farm"               
[17] "Ramrock Orchard"                     "Sweet Root Farm"                    
[19] "The Orchard at Flathead Lake"        "Wild Plum Farm"                     
[21] "Wustner Brothers Honey"              "Orange Street Food Farm"            
[23] "Pattee Creek Market"                 "Western Montana Growers Cooperative"

$`3`
[1] "Clark Fork Organics"     "Forbidden Fruit Orchard"
[3] "Lifeline Produce"        "Paradise Gardens"       
[5] "Ploughshare Farm"        "Sophie's Farm"          
[7] "Missoula Farmers Market"

$`4`
[1] "County Rail Farm"          "Dixon Melons"             
[3] "Flathead Lake Cheese Co."  "Harlequin Organic Produce"
[5] "Clark Fork Market"        

$`5`
[1] "Albertsons"

$`6`
[1] "Costco"

$`7`
[1] "Roasauers"

$`8`
[1] "Target"

$`9`
[1] "Walmart Supercenter"

$`10`
[1] "WinCo"

$`11`
[1] "Yoke's Fresh Market"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot fast and greedy</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "fg_comms.png") # save as png</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net_fg, net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>, <span class="at">sub =</span> <span class="st">"Fast and Greedy Method"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/fast and greedy-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>These groups do actually make sense and can be broadly categorized as follows:</p>
<ul>
<li>Group 1: The Good Food Store and producers that sell directly to it</li>
<li>Group 2: The Western Montana Growers Cooperative, producers that sell <em>only</em> to it, and retailers that buy <em>only</em> from it (i.e.&nbsp;do not buy from producers directly)</li>
<li>Group 3: Missoula Farmers’ Market and producers that participate (even if they also sell to other entities)</li>
<li>Group 4: Clark Fork Market and producers that participate (even if they also sell to other entities)</li>
<li>Groups 5-11: Those individual retailers who do not purchase local food</li>
</ul>
</section>
<section id="walktrap" class="level3">
<h3 class="anchored" data-anchor-id="walktrap">Walktrap</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># walktrap</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>net_wt <span class="ot">&lt;-</span> <span class="fu">walktrap.community</span>(net, <span class="at">steps =</span> <span class="dv">4</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># get groups</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">groups</span>(net_wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$`1`
 [1] "County Rail Farm"          "Dixon Melons"             
 [3] "Flathead Lake Cheese Co."  "Forbidden Fruit Orchard"  
 [5] "Harlequin Organic Produce" "Paradise Gardens"         
 [7] "Ploughshare Farm"          "Sophie's Farm"            
 [9] "Clark Fork Market"         "Missoula Farmers Market"  

$`2`
 [1] "Bison and Bee Honey"                 "Clark Fork Organics"                
 [3] "Deluge Farm"                         "Dude's Organic Farm"                
 [5] "Elk Creek Colony"                    "Five Fox Farm"                      
 [7] "Foothill Farm"                       "Fourth Wave Farm"                   
 [9] "Fresh Roots Farm"                    "Ginger Roots Farm"                  
[11] "Glacier Tilth Farm"                  "Good Steward Farm"                  
[13] "Green Blade Farm"                    "Hilltop Haven"                      
[15] "Home Acres Orchard"                  "Lifeline Farm"                      
[17] "Lifeline Produce"                    "Lowdown Farm"                       
[19] "Mission Mountain Organic Eggs"       "Moss Farm"                          
[21] "Mother Fungi"                        "Mountain Spring Farm"               
[23] "Ramrock Orchard"                     "Spencer's Valley View Farm"         
[25] "Sweet Root Farm"                     "The Orchard at Flathead Lake"       
[27] "Wild Plum Farm"                      "Wustner Brothers Honey"             
[29] "Good Food Store"                     "Orange Street Food Farm"            
[31] "Pattee Creek Market"                 "Western Montana Growers Cooperative"

$`3`
[1] "Charlie's Produce" "Natural Grocer's" 

$`4`
[1] "Timeless Seeds, Inc."                   
[2] "Mission Mountain Food Enterprise Center"

$`5`
[1] "Albertsons"

$`6`
[1] "Costco"

$`7`
[1] "Roasauers"

$`8`
[1] "Target"

$`9`
[1] "Walmart Supercenter"

$`10`
[1] "WinCo"

$`11`
[1] "Yoke's Fresh Market"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot walktrap</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net_wt, net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>, <span class="at">main =</span> <span class="st">"Communities Within the Local Food System"</span>, <span class="at">sub =</span> <span class="st">"Walktrap Method"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/walktrap-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>After tuning the <code>steps</code> parameter, this is the best grouping the walktrap method could produce. These communities make less sense than the those identified by the first method. Some communities that the fast and greedy method identified as unique have been collapsed into a single community in a way that does not make sense to me.</p>
</section>
<section id="leading-label-propagation" class="level3">
<h3 class="anchored" data-anchor-id="leading-label-propagation">Leading Label Propagation</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># leading label</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>net_ll <span class="ot">&lt;-</span> <span class="fu">label.propagation.community</span>(net)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># get groups</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">groups</span>(net_ll)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$`1`
[1] "Bison and Bee Honey"

$`2`
[1] "Clark Fork Organics"     "Missoula Farmers Market"

$`3`
[1] "County Rail Farm"

$`4`
[1] "Deluge Farm"

$`5`
[1] "Dixon Melons"

$`6`
[1] "Dude's Organic Farm"

$`7`
[1] "Elk Creek Colony"

$`8`
[1] "Five Fox Farm"

$`9`
[1] "Flathead Lake Cheese Co."

$`10`
[1] "Foothill Farm"

$`11`
[1] "Forbidden Fruit Orchard"

$`12`
[1] "Fourth Wave Farm"

$`13`
[1] "Fresh Roots Farm"

$`14`
[1] "Ginger Roots Farm"

$`15`
[1] "Glacier Tilth Farm"

$`16`
[1] "Good Steward Farm"

$`17`
[1] "Green Blade Farm"

$`18`
[1] "Harlequin Organic Produce" "Clark Fork Market"        

$`19`
[1] "Hilltop Haven"

$`20`
[1] "Home Acres Orchard"

$`21`
[1] "Lifeline Farm"

$`22`
[1] "Lifeline Produce" "Good Food Store" 

$`23`
[1] "Lowdown Farm"

$`24`
[1] "Mission Mountain Organic Eggs"

$`25`
[1] "Moss Farm"

$`26`
[1] "Mother Fungi"

$`27`
[1] "Mountain Spring Farm"

$`28`
[1] "Paradise Gardens"

$`29`
[1] "Ploughshare Farm"

$`30`
[1] "Ramrock Orchard"

$`31`
[1] "Sophie's Farm"

$`32`
[1] "Spencer's Valley View Farm"

$`33`
[1] "Sweet Root Farm"

$`34`
[1] "The Orchard at Flathead Lake"

$`35`
[1] "Timeless Seeds, Inc."                   
[2] "Mission Mountain Food Enterprise Center"

$`36`
[1] "Wild Plum Farm"

$`37`
[1] "Wustner Brothers Honey"              "Orange Street Food Farm"            
[3] "Pattee Creek Market"                 "Western Montana Growers Cooperative"

$`38`
[1] "Albertsons"

$`39`
[1] "Charlie's Produce" "Natural Grocer's" 

$`40`
[1] "Costco"

$`41`
[1] "Roasauers"

$`42`
[1] "Target"

$`43`
[1] "Walmart Supercenter"

$`44`
[1] "WinCo"

$`45`
[1] "Yoke's Fresh Market"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot leading label</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net_ll, net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>, <span class="at">main =</span> <span class="st">"Communities Within the Local Food System"</span>, <span class="at">sub =</span> <span class="st">"Leading Label Propagation Method"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/leading label-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Leading label propagation has identified 45 distinct communities, which does not fit with how I know these entities interact.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compare modularity scores</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>mods <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">fastgreedy =</span> <span class="fu">modularity</span>(net_fg), <span class="at">walktrap =</span> <span class="fu">modularity</span>(net_wt), <span class="at">llabel =</span> <span class="fu">modularity</span>(net_ll))</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mods)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>fastgreedy   walktrap     llabel 
0.31689453 0.22998047 0.06054688 </code></pre>
</div>
</div>
<p>The modularity scores confirm what examination of the groupings indicate—that the fast and greedy method has done the best job of identifying communities within the network.</p>
</section>
</section>
<section id="hypothesis-testing-1" class="level2">
<h2 class="anchored" data-anchor-id="hypothesis-testing-1">Hypothesis Testing</h2>
<p>The two hypotheses I will test are:</p>
<p>H₁: The degree centralization is different than what we would expect if this network were formed by chance. I will condition on both size (the number of nodes) and edges (the number of ties).</p>
<p>H₂: The betweenness centralization is different than what we would expect if this network were formed by chance. I will condition on both size (the number of nodes) and edges (the number of ties).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coerce network object</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>net_stat <span class="ot">&lt;-</span> intergraph<span class="sc">::</span><span class="fu">asNetwork</span>(net)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(net_stat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "network"</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(net_stat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> Network attributes:
  vertices = 53 
  directed = TRUE 
  hyper = FALSE 
  loops = FALSE 
  multiple = FALSE 
  bipartite = FALSE 
  total edges= 64 
    missing edges= 0 
    non-missing edges= 64 

 Vertex attribute names: 
    color node_attribute node_attribute_subtype vertex.names 

No edge attributes</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on size</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>cug_d_size <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> centralization,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"degree"</span>, <span class="at">mode =</span> <span class="st">"all"</span>), </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cmode =</span> <span class="st">"size"</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on edges</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>cug_d_edges <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> centralization,</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"degree"</span>, <span class="at">mode =</span> <span class="st">"all"</span>), </span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cmode =</span> <span class="st">"edges"</span>)</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_d_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Univariate Conditional Uniform Graph Test

Conditioning Method: size 
Graph Type: digraph 
Diagonal Used: FALSE 
Replications: 1000 

Observed Value: 0.3855581 
Pr(X&gt;=Obs): 0 
Pr(X&lt;=Obs): 1 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_d_edges)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Univariate Conditional Uniform Graph Test

Conditioning Method: edges 
Graph Type: digraph 
Diagonal Used: FALSE 
Replications: 1000 

Observed Value: 0.3855581 
Pr(X&gt;=Obs): 0 
Pr(X&lt;=Obs): 1 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine outputs</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>cug_d <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_d_size<span class="sc">$</span>obs.stat,</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>           cug_d_edges<span class="sc">$</span>obs.stat)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>pct_g_d <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_d_size<span class="sc">$</span>pgteobs,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>             cug_d_edges<span class="sc">$</span>pgteobs)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>pct_l_d <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_d_size<span class="sc">$</span>plteobs,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>             cug_d_edges<span class="sc">$</span>plteobs)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>degree <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cug_d,</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>                     pct_g_d, </span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>                     pct_l_d)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(degree) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Size"</span>, <span class="st">"Edges"</span>)</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(degree, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      cug_d pct_g_d pct_l_d
Size   0.39       0       1
Edges  0.39       0       1</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "CUG_degree.png")</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_d_size, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Degree </span><span class="sc">\n</span><span class="st">Conditioned on Size"</span> )</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_d_edges, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Degree </span><span class="sc">\n</span><span class="st">Conditioned on Edges"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/cug degree plots-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can see from the above table and plots that the observed degree centralization is very uncommon for a network of this size and with this number of ties. That is, it was likely not formed by chance.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on size</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>cug_b_size <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> centralization,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"betweenness"</span>), </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cmode =</span> <span class="st">"size"</span>)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on edges</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>cug_b_edges <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">FUN =</span> centralization,</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"betweenness"</span>), </span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cmode =</span> <span class="st">"edges"</span>)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_b_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Univariate Conditional Uniform Graph Test

Conditioning Method: size 
Graph Type: digraph 
Diagonal Used: FALSE 
Replications: 1000 

Observed Value: 0.05297526 
Pr(X&gt;=Obs): 0 
Pr(X&lt;=Obs): 1 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_b_edges)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Univariate Conditional Uniform Graph Test

Conditioning Method: edges 
Graph Type: digraph 
Diagonal Used: FALSE 
Replications: 1000 

Observed Value: 0.05297526 
Pr(X&gt;=Obs): 0.48 
Pr(X&lt;=Obs): 0.52 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine outputs</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>cug_b <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_b_size<span class="sc">$</span>obs.stat,</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>           cug_b_edges<span class="sc">$</span>obs.stat)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>pct_g <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_b_size<span class="sc">$</span>pgteobs,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>           cug_b_edges<span class="sc">$</span>pgteobs)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>pct_l <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_b_size<span class="sc">$</span>plteobs,</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>           cug_b_edges<span class="sc">$</span>plteobs)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>betweenness <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cug_b,</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>                     pct_g, </span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>                     pct_l)</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(betweenness) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Size"</span>, <span class="st">"Edges"</span>)</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(betweenness, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      cug_b pct_g pct_l
Size   0.05  0.00  1.00
Edges  0.05  0.48  0.52</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "CUG_betweenness.png")</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_b_size, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Betweenness </span><span class="sc">\n</span><span class="st">Conditioned on Size"</span> )</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_b_edges, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Betweenness </span><span class="sc">\n</span><span class="st">Conditioned on Edges"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="ClaireBattaglia_FinalProject_files/figure-html/cug betweenness plots-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We can see from the second table and set of plots that the observed betweenness centralization is very uncommon for a network of this size but not uncommon for a network with this number of ties.</p>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>We can see from the above exploration that this network is star shaped, meaning that it is likely highly efficient and potentially less resilient. A single node—the Western Montana Growers Cooperative—has the highest degree centrality and the highest betweenness centrality and likely has significant control over the flow of goods (and other content not represented in this network, like information). Thinking about local food system formation, success, and resilience, it may turn out that having one such node is essential. While I haven’t operationalized “success” and “resilience” yet, the local food system in Missoula is generally considered to be fairly robust and, in fact, I coached several nascent local food distributors in other communities who were looking to replicate the success of the Western Montana Growers Cooperative during the COVID-19 pandemic.</p>
<p>I am really interested to see what will surface after I have collected data to analyze other local food systems. That will allow me to determine baselines measurements to compare food systems to. Once I have a dataset in which each local food system (i.e.&nbsp;a network) is its own case and these network features are the variables, I will then operationalize “success” and “resilience” and be able to see which features predict success and resilience. This is critical because the current literature on local food system development tends to be qualitative, leading to a paucity of actionable recommendations to communities looking to create a robust local food system. This project will ultimately contribute to this body of research by providing clear, actionable recommendations that—importantly!—are driven by data.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/Social_Networks_Spring_2023" data-repo-id="R_kgDOI9d_OA" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb60" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "The Local Food System in Missoula, Montana"</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "A Network Analysis"</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Claire Battaglia"</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> ""</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "05/20/2023"</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="co"># editor: visual</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> </span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - Claire Battaglia</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co">  - final project</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="co">  - local food systems</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="co">  - network analysis</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a><span class="co"># load pkgs</span></span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(intergraph, <span class="co"># coerce network objects</span></span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>               sna, <span class="co"># network stats</span></span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>               igraph,</span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a>               data.table,</span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a>               tidyverse)</span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb60-35"><a href="#cb60-35" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-36"><a href="#cb60-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-37"><a href="#cb60-37" aria-hidden="true" tabindex="-1"></a><span class="fu">## Background</span></span>
<span id="cb60-38"><a href="#cb60-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-39"><a href="#cb60-39" aria-hidden="true" tabindex="-1"></a>Interest in locally produced food has grown significantly over the years, as evidenced by the expansion of local food systems in regions across the United States. Yet while some have become incredibly robust---weathering closures during COVID with ease and even capitalizing on the opportunities presented by the disruption to the conventional food system---others have faltered and stalled. Why? What makes a food system successful and resilient?</span>
<span id="cb60-40"><a href="#cb60-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-41"><a href="#cb60-41" aria-hidden="true" tabindex="-1"></a>Network analysis offers a unique opportunity to understand food systems *as networks*, allowing us to identify network features that are determinants of food system success and resilience.</span>
<span id="cb60-42"><a href="#cb60-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-43"><a href="#cb60-43" aria-hidden="true" tabindex="-1"></a>Identifying these features requires the analysis of many, many local food systems as networks, which is beyond the scope of this project. This analysis, then, will serve as a first step by developing a framework for analysis that can be replicated with other food systems in the future.</span>
<span id="cb60-44"><a href="#cb60-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-45"><a href="#cb60-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Research Question &amp; Hypotheses</span></span>
<span id="cb60-46"><a href="#cb60-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-47"><a href="#cb60-47" aria-hidden="true" tabindex="-1"></a>What are the network determinants of success and resilience for local food systems?</span>
<span id="cb60-48"><a href="#cb60-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-49"><a href="#cb60-49" aria-hidden="true" tabindex="-1"></a>H₁: How a network is formed is a determinant of success/resilience.</span>
<span id="cb60-50"><a href="#cb60-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-51"><a href="#cb60-51" aria-hidden="true" tabindex="-1"></a>H₂: Network size is a determinant of success/resilience.</span>
<span id="cb60-52"><a href="#cb60-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-53"><a href="#cb60-53" aria-hidden="true" tabindex="-1"></a>H₃: The category of entity (i.e. producer, processor, distributor, retailer) with the highest degree centralization is a determinant of success/resilience.</span>
<span id="cb60-54"><a href="#cb60-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-55"><a href="#cb60-55" aria-hidden="true" tabindex="-1"></a>H₄: The category of entity (i.e. producer, processor, distributor, retailer) with the highest betweenness centralization is a determinant of success/resilience.</span>
<span id="cb60-56"><a href="#cb60-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-57"><a href="#cb60-57" aria-hidden="true" tabindex="-1"></a>Testing these hypotheses will not be possible until I have analyzed data from enough networks to build a model in which these features are the predictor variables and food system success and resilience are the outcome variables. For this project, then, I will explore the aforementioned measures and test the following hypotheses pertaining to network formation:</span>
<span id="cb60-58"><a href="#cb60-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-59"><a href="#cb60-59" aria-hidden="true" tabindex="-1"></a>H₁: The degree centralization is different than what we would expect if this network were formed by chance.</span>
<span id="cb60-60"><a href="#cb60-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-61"><a href="#cb60-61" aria-hidden="true" tabindex="-1"></a>H₂: The betweenness centralization is different than what we would expect if this network were formed by chance.</span>
<span id="cb60-62"><a href="#cb60-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-63"><a href="#cb60-63" aria-hidden="true" tabindex="-1"></a><span class="fu">## Methods &amp; Data</span></span>
<span id="cb60-64"><a href="#cb60-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-65"><a href="#cb60-65" aria-hidden="true" tabindex="-1"></a><span class="fu">### Data</span></span>
<span id="cb60-66"><a href="#cb60-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-67"><a href="#cb60-67" aria-hidden="true" tabindex="-1"></a>All data were collected by me and compiled into a node list and edge list.</span>
<span id="cb60-68"><a href="#cb60-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-69"><a href="#cb60-69" aria-hidden="true" tabindex="-1"></a>A node is any entity along the local food supply chain: producer, processor, distributor, retailer.</span>
<span id="cb60-70"><a href="#cb60-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-71"><a href="#cb60-71" aria-hidden="true" tabindex="-1"></a>A tie represents that goods are flowing between two entities. It is a binary classification and does not indicate the type or volume of goods flowing.</span>
<span id="cb60-72"><a href="#cb60-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-73"><a href="#cb60-73" aria-hidden="true" tabindex="-1"></a>I used the <span class="co">[</span><span class="ot">Abundant Montana Local Food Guide</span><span class="co">](https://abundantmontana.com/)</span>, Google Maps, websites of known entities, and field identification and verification to compile both the node and edge list.</span>
<span id="cb60-74"><a href="#cb60-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-75"><a href="#cb60-75" aria-hidden="true" tabindex="-1"></a><span class="fu">### Hypothesis Testing</span></span>
<span id="cb60-76"><a href="#cb60-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-77"><a href="#cb60-77" aria-hidden="true" tabindex="-1"></a>I will perform a CUG-test to test my hypotheses about network formation.</span>
<span id="cb60-78"><a href="#cb60-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-79"><a href="#cb60-79" aria-hidden="true" tabindex="-1"></a><span class="fu">## Network Structure &amp; Statistics</span></span>
<span id="cb60-80"><a href="#cb60-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-81"><a href="#cb60-81" aria-hidden="true" tabindex="-1"></a>I'll begin by reading in my data and transforming it into a network object.</span>
<span id="cb60-82"><a href="#cb60-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-83"><a href="#cb60-83" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data}</span></span>
<span id="cb60-84"><a href="#cb60-84" aria-hidden="true" tabindex="-1"></a><span class="co"># read in data</span></span>
<span id="cb60-85"><a href="#cb60-85" aria-hidden="true" tabindex="-1"></a>nodes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"_data/food_system_network - nodelist.csv"</span>, <span class="at">header =</span> T, <span class="at">as.is =</span> T)</span>
<span id="cb60-86"><a href="#cb60-86" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"_data/food_system_network - edgelist.csv"</span>, <span class="at">header =</span> T, <span class="at">as.is =</span> T)</span>
<span id="cb60-87"><a href="#cb60-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-88"><a href="#cb60-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-89"><a href="#cb60-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{r preview}</span></span>
<span id="cb60-90"><a href="#cb60-90" aria-hidden="true" tabindex="-1"></a><span class="co"># preview</span></span>
<span id="cb60-91"><a href="#cb60-91" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nodes, <span class="dv">5</span>)</span>
<span id="cb60-92"><a href="#cb60-92" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(links, <span class="dv">5</span>)</span>
<span id="cb60-93"><a href="#cb60-93" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-94"><a href="#cb60-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-95"><a href="#cb60-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r network object}</span></span>
<span id="cb60-96"><a href="#cb60-96" aria-hidden="true" tabindex="-1"></a><span class="co"># create network object - igraph</span></span>
<span id="cb60-97"><a href="#cb60-97" aria-hidden="true" tabindex="-1"></a>net <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d =</span> links, <span class="at">vertices =</span> nodes, <span class="at">directed =</span> T)</span>
<span id="cb60-98"><a href="#cb60-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-99"><a href="#cb60-99" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb60-100"><a href="#cb60-100" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(net)</span>
<span id="cb60-101"><a href="#cb60-101" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(net)</span>
<span id="cb60-102"><a href="#cb60-102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-103"><a href="#cb60-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-104"><a href="#cb60-104" aria-hidden="true" tabindex="-1"></a>This network is *directed*, *named*, and contains <span class="in">`r gorder(net)`</span> nodes and <span class="in">`r gsize(net)`</span> ties. It is unweighted, meaning that each tie represents that goods are flowing but does not convey any other information, such as the type or volume of goods.</span>
<span id="cb60-105"><a href="#cb60-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-106"><a href="#cb60-106" aria-hidden="true" tabindex="-1"></a><span class="in">```{r density}</span></span>
<span id="cb60-107"><a href="#cb60-107" aria-hidden="true" tabindex="-1"></a><span class="co"># calc density</span></span>
<span id="cb60-108"><a href="#cb60-108" aria-hidden="true" tabindex="-1"></a><span class="fu">graph.density</span>(net)</span>
<span id="cb60-109"><a href="#cb60-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-110"><a href="#cb60-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-111"><a href="#cb60-111" aria-hidden="true" tabindex="-1"></a>The density of this network appears to be extremely low, although until I have data from other food system networks I can't know whether it is low for *this type of network.*</span>
<span id="cb60-112"><a href="#cb60-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-113"><a href="#cb60-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r census}</span></span>
<span id="cb60-114"><a href="#cb60-114" aria-hidden="true" tabindex="-1"></a><span class="co"># dyad census</span></span>
<span id="cb60-115"><a href="#cb60-115" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">dyad.census</span>(net)</span>
<span id="cb60-116"><a href="#cb60-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-117"><a href="#cb60-117" aria-hidden="true" tabindex="-1"></a><span class="co"># triad census</span></span>
<span id="cb60-118"><a href="#cb60-118" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">triad.census</span>(net)</span>
<span id="cb60-119"><a href="#cb60-119" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-120"><a href="#cb60-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-121"><a href="#cb60-121" aria-hidden="true" tabindex="-1"></a>There are 0 mutual ties. That is, there are no node pairs who exchange goods with one another—all 64 ties are asymmetrical. There are 1,314 null ties, meaning that for those node pairs there is no flow of goods at all. This is not surprising, as most producers do not sell their products to other producers but to distributors or retailers. And while distributors and retailers purchase from producers, they do not typically sell any products to them.</span>
<span id="cb60-122"><a href="#cb60-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-123"><a href="#cb60-123" aria-hidden="true" tabindex="-1"></a>I have included the censuses as a point of comparison between food system networks as I continue this project but, given the nature of ties between nodes in a food supply chain, dyads and triads might not be as useful in evaluating supply chain networks as they are in evaluating other types of networks.</span>
<span id="cb60-124"><a href="#cb60-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-125"><a href="#cb60-125" aria-hidden="true" tabindex="-1"></a><span class="in">```{r components}</span></span>
<span id="cb60-126"><a href="#cb60-126" aria-hidden="true" tabindex="-1"></a><span class="co"># get number of components</span></span>
<span id="cb60-127"><a href="#cb60-127" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(net)<span class="sc">$</span>no</span>
<span id="cb60-128"><a href="#cb60-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-129"><a href="#cb60-129" aria-hidden="true" tabindex="-1"></a><span class="co"># get size of components</span></span>
<span id="cb60-130"><a href="#cb60-130" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">components</span>(net)<span class="sc">$</span>csize</span>
<span id="cb60-131"><a href="#cb60-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-132"><a href="#cb60-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-133"><a href="#cb60-133" aria-hidden="true" tabindex="-1"></a>This network has 8 components, one of which contains 46 nodes and 7 isolates.</span>
<span id="cb60-134"><a href="#cb60-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-135"><a href="#cb60-135" aria-hidden="true" tabindex="-1"></a><span class="fu">## Centrality</span></span>
<span id="cb60-136"><a href="#cb60-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-137"><a href="#cb60-137" aria-hidden="true" tabindex="-1"></a>The measure of status that I am interested in is degree centrality (both in/out, as this is a directed network). Degree centrality---the number of nodes to which the focal node is connected---is important in the context of a food system because entities with high degree centrality likely have significant influence within the system. In price setting, for example. In comparing local food systems to one another, degree distribution will likely be relevant, as well as which type of entity has the highest degree centrality.</span>
<span id="cb60-138"><a href="#cb60-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-139"><a href="#cb60-139" aria-hidden="true" tabindex="-1"></a>The measure of power that I am interested in is betweenness centrality. This measure is extremely important to consider when thinking about resilience because entities with high betweenness centrality are likely critical to the system's ability to withstand shock. As with degree centrality, the distribution and type of entity with the highest betweenness centrality will likely be important when comparing local food systems.</span>
<span id="cb60-140"><a href="#cb60-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-141"><a href="#cb60-141" aria-hidden="true" tabindex="-1"></a><span class="in">```{r centrality}</span></span>
<span id="cb60-142"><a href="#cb60-142" aria-hidden="true" tabindex="-1"></a><span class="co"># create dataframe of node degrees and betweenness</span></span>
<span id="cb60-143"><a href="#cb60-143" aria-hidden="true" tabindex="-1"></a>net_nodes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">name =</span> <span class="fu">V</span>(net)<span class="sc">$</span>name, <span class="at">degree =</span> <span class="fu">degree</span>(net)) <span class="sc">%&gt;%</span></span>
<span id="cb60-144"><a href="#cb60-144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">indegree =</span> <span class="fu">degree</span>(net, <span class="at">mode =</span> <span class="st">"in"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb60-145"><a href="#cb60-145" aria-hidden="true" tabindex="-1"></a>          <span class="at">outdegree =</span> <span class="fu">degree</span>(net, <span class="at">mode =</span> <span class="st">"out"</span>, <span class="at">loops =</span> <span class="cn">FALSE</span>),</span>
<span id="cb60-146"><a href="#cb60-146" aria-hidden="true" tabindex="-1"></a>          <span class="at">between =</span> <span class="fu">betweenness</span>(net))</span>
<span id="cb60-147"><a href="#cb60-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-148"><a href="#cb60-148" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(net_nodes)</span>
<span id="cb60-149"><a href="#cb60-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-150"><a href="#cb60-150" aria-hidden="true" tabindex="-1"></a><span class="co"># get summary</span></span>
<span id="cb60-151"><a href="#cb60-151" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(net_nodes)</span>
<span id="cb60-152"><a href="#cb60-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-153"><a href="#cb60-153" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "distributions.png") # save as png</span></span>
<span id="cb60-154"><a href="#cb60-154" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb60-155"><a href="#cb60-155" aria-hidden="true" tabindex="-1"></a><span class="co"># plot in-deg dist</span></span>
<span id="cb60-156"><a href="#cb60-156" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(net_nodes<span class="sc">$</span>indegree, <span class="at">col =</span> <span class="st">"#714466"</span>, <span class="at">main =</span> <span class="st">"In-degree Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Number of entities from which goods are received"</span>)</span>
<span id="cb60-157"><a href="#cb60-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-158"><a href="#cb60-158" aria-hidden="true" tabindex="-1"></a><span class="co"># plot out-deg dist</span></span>
<span id="cb60-159"><a href="#cb60-159" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(net_nodes<span class="sc">$</span>outdegree, <span class="at">col =</span> <span class="st">"#714466"</span>, <span class="at">main =</span> <span class="st">"Out-degree Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Number of entities to which goods are sent"</span>)</span>
<span id="cb60-160"><a href="#cb60-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-161"><a href="#cb60-161" aria-hidden="true" tabindex="-1"></a><span class="co"># plot betweenness</span></span>
<span id="cb60-162"><a href="#cb60-162" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(net_nodes<span class="sc">$</span>between, <span class="at">col =</span> <span class="st">"#714466"</span>, <span class="at">main =</span> <span class="st">"Betweenness Distribution"</span>, <span class="at">xlab =</span> <span class="st">"Betweenness"</span>)</span>
<span id="cb60-163"><a href="#cb60-163" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb60-164"><a href="#cb60-164" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off()</span></span>
<span id="cb60-165"><a href="#cb60-165" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-166"><a href="#cb60-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-167"><a href="#cb60-167" aria-hidden="true" tabindex="-1"></a>We can see that using both degree centrality and betweenness centrality, the Western Montana Growers Cooperative is the most important individual entity in the network. Moreover, we can also see that the network is extremely uneven in that there is only one entity with high degree and high betweenness centrality.</span>
<span id="cb60-168"><a href="#cb60-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-169"><a href="#cb60-169" aria-hidden="true" tabindex="-1"></a><span class="fu">## Network Visualization</span></span>
<span id="cb60-170"><a href="#cb60-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-171"><a href="#cb60-171" aria-hidden="true" tabindex="-1"></a><span class="in">```{r network plot}</span></span>
<span id="cb60-172"><a href="#cb60-172" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb60-173"><a href="#cb60-173" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "network.png") # save as png</span></span>
<span id="cb60-174"><a href="#cb60-174" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>)</span>
<span id="cb60-175"><a href="#cb60-175" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off()</span></span>
<span id="cb60-176"><a href="#cb60-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-177"><a href="#cb60-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-178"><a href="#cb60-178" aria-hidden="true" tabindex="-1"></a>We can see in the above plot that the Western Montana Growers Cooperative (in blue) is, indeed, the node with the highest degree centrality and the highest betweenness centrality. We can also easily identify the isolates, all of which are large food retailers. It's important to note that they are only isolates in the *local* food setting.</span>
<span id="cb60-179"><a href="#cb60-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-180"><a href="#cb60-180" aria-hidden="true" tabindex="-1"></a><span class="fu">## Community Detection</span></span>
<span id="cb60-181"><a href="#cb60-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-182"><a href="#cb60-182" aria-hidden="true" tabindex="-1"></a>I'll use several methods of detecting communities within a network, beginning with the fast and greedy method, and then compare them.</span>
<span id="cb60-183"><a href="#cb60-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-184"><a href="#cb60-184" aria-hidden="true" tabindex="-1"></a><span class="fu">### Fast and Greedy</span></span>
<span id="cb60-185"><a href="#cb60-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-186"><a href="#cb60-186" aria-hidden="true" tabindex="-1"></a><span class="in">```{r fast and greedy}</span></span>
<span id="cb60-187"><a href="#cb60-187" aria-hidden="true" tabindex="-1"></a><span class="co"># fast and greedy</span></span>
<span id="cb60-188"><a href="#cb60-188" aria-hidden="true" tabindex="-1"></a>net_fg <span class="ot">&lt;-</span> <span class="fu">cluster_fast_greedy</span>(<span class="fu">as.undirected</span>(net))</span>
<span id="cb60-189"><a href="#cb60-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-190"><a href="#cb60-190" aria-hidden="true" tabindex="-1"></a><span class="co"># get groups</span></span>
<span id="cb60-191"><a href="#cb60-191" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">groups</span>(net_fg)</span>
<span id="cb60-192"><a href="#cb60-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-193"><a href="#cb60-193" aria-hidden="true" tabindex="-1"></a><span class="co"># plot fast and greedy</span></span>
<span id="cb60-194"><a href="#cb60-194" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "fg_comms.png") # save as png</span></span>
<span id="cb60-195"><a href="#cb60-195" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net_fg, net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>, <span class="at">sub =</span> <span class="st">"Fast and Greedy Method"</span>)</span>
<span id="cb60-196"><a href="#cb60-196" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off()</span></span>
<span id="cb60-197"><a href="#cb60-197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-198"><a href="#cb60-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-199"><a href="#cb60-199" aria-hidden="true" tabindex="-1"></a>These groups do actually make sense and can be broadly categorized as follows:</span>
<span id="cb60-200"><a href="#cb60-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-201"><a href="#cb60-201" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Group 1: The Good Food Store and producers that sell directly to it</span>
<span id="cb60-202"><a href="#cb60-202" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Group 2: The Western Montana Growers Cooperative, producers that sell *only* to it, and retailers that buy *only* from it (i.e. do not buy from producers directly)</span>
<span id="cb60-203"><a href="#cb60-203" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Group 3: Missoula Farmers' Market and producers that participate (even if they also sell to other entities)</span>
<span id="cb60-204"><a href="#cb60-204" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Group 4: Clark Fork Market and producers that participate (even if they also sell to other entities)</span>
<span id="cb60-205"><a href="#cb60-205" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Groups 5-11: Those individual retailers who do not purchase local food</span>
<span id="cb60-206"><a href="#cb60-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-207"><a href="#cb60-207" aria-hidden="true" tabindex="-1"></a><span class="fu">### Walktrap</span></span>
<span id="cb60-208"><a href="#cb60-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-209"><a href="#cb60-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r walktrap}</span></span>
<span id="cb60-210"><a href="#cb60-210" aria-hidden="true" tabindex="-1"></a><span class="co"># walktrap</span></span>
<span id="cb60-211"><a href="#cb60-211" aria-hidden="true" tabindex="-1"></a>net_wt <span class="ot">&lt;-</span> <span class="fu">walktrap.community</span>(net, <span class="at">steps =</span> <span class="dv">4</span>)</span>
<span id="cb60-212"><a href="#cb60-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-213"><a href="#cb60-213" aria-hidden="true" tabindex="-1"></a><span class="co"># get groups</span></span>
<span id="cb60-214"><a href="#cb60-214" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">groups</span>(net_wt)</span>
<span id="cb60-215"><a href="#cb60-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-216"><a href="#cb60-216" aria-hidden="true" tabindex="-1"></a><span class="co"># plot walktrap</span></span>
<span id="cb60-217"><a href="#cb60-217" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net_wt, net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>, <span class="at">main =</span> <span class="st">"Communities Within the Local Food System"</span>, <span class="at">sub =</span> <span class="st">"Walktrap Method"</span>)</span>
<span id="cb60-218"><a href="#cb60-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-219"><a href="#cb60-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-220"><a href="#cb60-220" aria-hidden="true" tabindex="-1"></a>After tuning the <span class="in">`steps`</span> parameter, this is the best grouping the walktrap method could produce. These communities make less sense than the those identified by the first method. Some communities that the fast and greedy method identified as unique have been collapsed into a single community in a way that does not make sense to me.</span>
<span id="cb60-221"><a href="#cb60-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-222"><a href="#cb60-222" aria-hidden="true" tabindex="-1"></a><span class="fu">### Leading Label Propagation</span></span>
<span id="cb60-223"><a href="#cb60-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-224"><a href="#cb60-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r leading label}</span></span>
<span id="cb60-225"><a href="#cb60-225" aria-hidden="true" tabindex="-1"></a><span class="co"># leading label</span></span>
<span id="cb60-226"><a href="#cb60-226" aria-hidden="true" tabindex="-1"></a>net_ll <span class="ot">&lt;-</span> <span class="fu">label.propagation.community</span>(net)</span>
<span id="cb60-227"><a href="#cb60-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-228"><a href="#cb60-228" aria-hidden="true" tabindex="-1"></a><span class="co"># get groups</span></span>
<span id="cb60-229"><a href="#cb60-229" aria-hidden="true" tabindex="-1"></a>igraph<span class="sc">::</span><span class="fu">groups</span>(net_ll)</span>
<span id="cb60-230"><a href="#cb60-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-231"><a href="#cb60-231" aria-hidden="true" tabindex="-1"></a><span class="co"># plot leading label</span></span>
<span id="cb60-232"><a href="#cb60-232" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(net_ll, net, <span class="at">vertex.shape =</span> <span class="st">"circle"</span>, <span class="at">vertex.size =</span> <span class="dv">7</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">5</span>, <span class="at">vertex.label.color =</span> <span class="st">"black"</span>, <span class="at">edge.arrow.size =</span> .<span class="dv">25</span>, <span class="at">rescale =</span> <span class="cn">TRUE</span>, <span class="at">asp =</span> <span class="dv">0</span>, <span class="at">main =</span> <span class="st">"Communities Within the Local Food System"</span>, <span class="at">sub =</span> <span class="st">"Leading Label Propagation Method"</span>)</span>
<span id="cb60-233"><a href="#cb60-233" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-234"><a href="#cb60-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-235"><a href="#cb60-235" aria-hidden="true" tabindex="-1"></a>Leading label propagation has identified 45 distinct communities, which does not fit with how I know these entities interact.</span>
<span id="cb60-236"><a href="#cb60-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-237"><a href="#cb60-237" aria-hidden="true" tabindex="-1"></a><span class="in">```{r modularity}</span></span>
<span id="cb60-238"><a href="#cb60-238" aria-hidden="true" tabindex="-1"></a><span class="co"># compare modularity scores</span></span>
<span id="cb60-239"><a href="#cb60-239" aria-hidden="true" tabindex="-1"></a>mods <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">fastgreedy =</span> <span class="fu">modularity</span>(net_fg), <span class="at">walktrap =</span> <span class="fu">modularity</span>(net_wt), <span class="at">llabel =</span> <span class="fu">modularity</span>(net_ll))</span>
<span id="cb60-240"><a href="#cb60-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-241"><a href="#cb60-241" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mods)</span>
<span id="cb60-242"><a href="#cb60-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-243"><a href="#cb60-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-244"><a href="#cb60-244" aria-hidden="true" tabindex="-1"></a>The modularity scores confirm what examination of the groupings indicate---that the fast and greedy method has done the best job of identifying communities within the network.</span>
<span id="cb60-245"><a href="#cb60-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-246"><a href="#cb60-246" aria-hidden="true" tabindex="-1"></a><span class="fu">## Hypothesis Testing</span></span>
<span id="cb60-247"><a href="#cb60-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-248"><a href="#cb60-248" aria-hidden="true" tabindex="-1"></a>The two hypotheses I will test are:</span>
<span id="cb60-249"><a href="#cb60-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-250"><a href="#cb60-250" aria-hidden="true" tabindex="-1"></a>H₁: The degree centralization is different than what we would expect if this network were formed by chance. I will condition on both size (the number of nodes) and edges (the number of ties).</span>
<span id="cb60-251"><a href="#cb60-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-252"><a href="#cb60-252" aria-hidden="true" tabindex="-1"></a>H₂: The betweenness centralization is different than what we would expect if this network were formed by chance. I will condition on both size (the number of nodes) and edges (the number of ties).</span>
<span id="cb60-253"><a href="#cb60-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-254"><a href="#cb60-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r statnet network object}</span></span>
<span id="cb60-255"><a href="#cb60-255" aria-hidden="true" tabindex="-1"></a><span class="co"># coerce network object</span></span>
<span id="cb60-256"><a href="#cb60-256" aria-hidden="true" tabindex="-1"></a>net_stat <span class="ot">&lt;-</span> intergraph<span class="sc">::</span><span class="fu">asNetwork</span>(net)</span>
<span id="cb60-257"><a href="#cb60-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-258"><a href="#cb60-258" aria-hidden="true" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb60-259"><a href="#cb60-259" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(net_stat)</span>
<span id="cb60-260"><a href="#cb60-260" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(net_stat)</span>
<span id="cb60-261"><a href="#cb60-261" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-262"><a href="#cb60-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-263"><a href="#cb60-263" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cugtest degree}</span></span>
<span id="cb60-264"><a href="#cb60-264" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on size</span></span>
<span id="cb60-265"><a href="#cb60-265" aria-hidden="true" tabindex="-1"></a>cug_d_size <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb60-266"><a href="#cb60-266" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> centralization,</span>
<span id="cb60-267"><a href="#cb60-267" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"degree"</span>, <span class="at">mode =</span> <span class="st">"all"</span>), </span>
<span id="cb60-268"><a href="#cb60-268" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb60-269"><a href="#cb60-269" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cmode =</span> <span class="st">"size"</span>)</span>
<span id="cb60-270"><a href="#cb60-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-271"><a href="#cb60-271" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on edges</span></span>
<span id="cb60-272"><a href="#cb60-272" aria-hidden="true" tabindex="-1"></a>cug_d_edges <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb60-273"><a href="#cb60-273" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> centralization,</span>
<span id="cb60-274"><a href="#cb60-274" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"degree"</span>, <span class="at">mode =</span> <span class="st">"all"</span>), </span>
<span id="cb60-275"><a href="#cb60-275" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb60-276"><a href="#cb60-276" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cmode =</span> <span class="st">"edges"</span>)</span>
<span id="cb60-277"><a href="#cb60-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-278"><a href="#cb60-278" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_d_size)</span>
<span id="cb60-279"><a href="#cb60-279" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_d_edges)</span>
<span id="cb60-280"><a href="#cb60-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-281"><a href="#cb60-281" aria-hidden="true" tabindex="-1"></a><span class="co"># combine outputs</span></span>
<span id="cb60-282"><a href="#cb60-282" aria-hidden="true" tabindex="-1"></a>cug_d <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_d_size<span class="sc">$</span>obs.stat,</span>
<span id="cb60-283"><a href="#cb60-283" aria-hidden="true" tabindex="-1"></a>           cug_d_edges<span class="sc">$</span>obs.stat)</span>
<span id="cb60-284"><a href="#cb60-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-285"><a href="#cb60-285" aria-hidden="true" tabindex="-1"></a>pct_g_d <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_d_size<span class="sc">$</span>pgteobs,</span>
<span id="cb60-286"><a href="#cb60-286" aria-hidden="true" tabindex="-1"></a>             cug_d_edges<span class="sc">$</span>pgteobs)</span>
<span id="cb60-287"><a href="#cb60-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-288"><a href="#cb60-288" aria-hidden="true" tabindex="-1"></a>pct_l_d <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_d_size<span class="sc">$</span>plteobs,</span>
<span id="cb60-289"><a href="#cb60-289" aria-hidden="true" tabindex="-1"></a>             cug_d_edges<span class="sc">$</span>plteobs)</span>
<span id="cb60-290"><a href="#cb60-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-291"><a href="#cb60-291" aria-hidden="true" tabindex="-1"></a>degree <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cug_d,</span>
<span id="cb60-292"><a href="#cb60-292" aria-hidden="true" tabindex="-1"></a>                     pct_g_d, </span>
<span id="cb60-293"><a href="#cb60-293" aria-hidden="true" tabindex="-1"></a>                     pct_l_d)</span>
<span id="cb60-294"><a href="#cb60-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-295"><a href="#cb60-295" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(degree) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Size"</span>, <span class="st">"Edges"</span>)</span>
<span id="cb60-296"><a href="#cb60-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-297"><a href="#cb60-297" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(degree, <span class="dv">2</span>)</span>
<span id="cb60-298"><a href="#cb60-298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-299"><a href="#cb60-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-300"><a href="#cb60-300" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cug degree plots}</span></span>
<span id="cb60-301"><a href="#cb60-301" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb60-302"><a href="#cb60-302" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "CUG_degree.png")</span></span>
<span id="cb60-303"><a href="#cb60-303" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb60-304"><a href="#cb60-304" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_d_size, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Degree </span><span class="sc">\n</span><span class="st">Conditioned on Size"</span> )</span>
<span id="cb60-305"><a href="#cb60-305" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_d_edges, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Degree </span><span class="sc">\n</span><span class="st">Conditioned on Edges"</span> )</span>
<span id="cb60-306"><a href="#cb60-306" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb60-307"><a href="#cb60-307" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off</span></span>
<span id="cb60-308"><a href="#cb60-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-309"><a href="#cb60-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-310"><a href="#cb60-310" aria-hidden="true" tabindex="-1"></a>We can see from the above table and plots that the observed degree centralization is very uncommon for a network of this size and with this number of ties. That is, it was likely not formed by chance.</span>
<span id="cb60-311"><a href="#cb60-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-312"><a href="#cb60-312" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cugtest betweenness}</span></span>
<span id="cb60-313"><a href="#cb60-313" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on size</span></span>
<span id="cb60-314"><a href="#cb60-314" aria-hidden="true" tabindex="-1"></a>cug_b_size <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb60-315"><a href="#cb60-315" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> centralization,</span>
<span id="cb60-316"><a href="#cb60-316" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"betweenness"</span>), </span>
<span id="cb60-317"><a href="#cb60-317" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb60-318"><a href="#cb60-318" aria-hidden="true" tabindex="-1"></a>                       <span class="at">cmode =</span> <span class="st">"size"</span>)</span>
<span id="cb60-319"><a href="#cb60-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-320"><a href="#cb60-320" aria-hidden="true" tabindex="-1"></a><span class="co"># cug test - cond on edges</span></span>
<span id="cb60-321"><a href="#cb60-321" aria-hidden="true" tabindex="-1"></a>cug_b_edges <span class="ot">&lt;-</span> <span class="fu">cug.test</span>(net_stat,</span>
<span id="cb60-322"><a href="#cb60-322" aria-hidden="true" tabindex="-1"></a>                        <span class="at">FUN =</span> centralization,</span>
<span id="cb60-323"><a href="#cb60-323" aria-hidden="true" tabindex="-1"></a>                        <span class="at">FUN.arg =</span> <span class="fu">list</span>(<span class="at">FUN =</span> <span class="st">"betweenness"</span>), </span>
<span id="cb60-324"><a href="#cb60-324" aria-hidden="true" tabindex="-1"></a>                        <span class="at">mode =</span> <span class="st">"digraph"</span>, </span>
<span id="cb60-325"><a href="#cb60-325" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cmode =</span> <span class="st">"edges"</span>)</span>
<span id="cb60-326"><a href="#cb60-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-327"><a href="#cb60-327" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_b_size)</span>
<span id="cb60-328"><a href="#cb60-328" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cug_b_edges)</span>
<span id="cb60-329"><a href="#cb60-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-330"><a href="#cb60-330" aria-hidden="true" tabindex="-1"></a><span class="co"># combine outputs</span></span>
<span id="cb60-331"><a href="#cb60-331" aria-hidden="true" tabindex="-1"></a>cug_b <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_b_size<span class="sc">$</span>obs.stat,</span>
<span id="cb60-332"><a href="#cb60-332" aria-hidden="true" tabindex="-1"></a>           cug_b_edges<span class="sc">$</span>obs.stat)</span>
<span id="cb60-333"><a href="#cb60-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-334"><a href="#cb60-334" aria-hidden="true" tabindex="-1"></a>pct_g <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_b_size<span class="sc">$</span>pgteobs,</span>
<span id="cb60-335"><a href="#cb60-335" aria-hidden="true" tabindex="-1"></a>           cug_b_edges<span class="sc">$</span>pgteobs)</span>
<span id="cb60-336"><a href="#cb60-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-337"><a href="#cb60-337" aria-hidden="true" tabindex="-1"></a>pct_l <span class="ot">&lt;-</span> <span class="fu">c</span>(cug_b_size<span class="sc">$</span>plteobs,</span>
<span id="cb60-338"><a href="#cb60-338" aria-hidden="true" tabindex="-1"></a>           cug_b_edges<span class="sc">$</span>plteobs)</span>
<span id="cb60-339"><a href="#cb60-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-340"><a href="#cb60-340" aria-hidden="true" tabindex="-1"></a>betweenness <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cug_b,</span>
<span id="cb60-341"><a href="#cb60-341" aria-hidden="true" tabindex="-1"></a>                     pct_g, </span>
<span id="cb60-342"><a href="#cb60-342" aria-hidden="true" tabindex="-1"></a>                     pct_l)</span>
<span id="cb60-343"><a href="#cb60-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-344"><a href="#cb60-344" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(betweenness) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Size"</span>, <span class="st">"Edges"</span>)</span>
<span id="cb60-345"><a href="#cb60-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-346"><a href="#cb60-346" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(betweenness, <span class="dv">2</span>)</span>
<span id="cb60-347"><a href="#cb60-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-348"><a href="#cb60-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-349"><a href="#cb60-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cug betweenness plots}</span></span>
<span id="cb60-350"><a href="#cb60-350" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb60-351"><a href="#cb60-351" aria-hidden="true" tabindex="-1"></a><span class="co">#png(filename = "CUG_betweenness.png")</span></span>
<span id="cb60-352"><a href="#cb60-352" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb60-353"><a href="#cb60-353" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_b_size, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Betweenness </span><span class="sc">\n</span><span class="st">Conditioned on Size"</span> )</span>
<span id="cb60-354"><a href="#cb60-354" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cug_b_edges, <span class="at">col =</span> <span class="st">"#ebb83b"</span>, <span class="at">main =</span> <span class="st">"Betweenness </span><span class="sc">\n</span><span class="st">Conditioned on Edges"</span> )</span>
<span id="cb60-355"><a href="#cb60-355" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb60-356"><a href="#cb60-356" aria-hidden="true" tabindex="-1"></a><span class="co">#dev.off</span></span>
<span id="cb60-357"><a href="#cb60-357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb60-358"><a href="#cb60-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-359"><a href="#cb60-359" aria-hidden="true" tabindex="-1"></a>We can see from the second table and set of plots that the observed betweenness centralization is very uncommon for a network of this size but not uncommon for a network with this number of ties.</span>
<span id="cb60-360"><a href="#cb60-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-361"><a href="#cb60-361" aria-hidden="true" tabindex="-1"></a><span class="fu">## Discussion</span></span>
<span id="cb60-362"><a href="#cb60-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-363"><a href="#cb60-363" aria-hidden="true" tabindex="-1"></a>We can see from the above exploration that this network is star shaped, meaning that it is likely highly efficient and potentially less resilient. A single node—the Western Montana Growers Cooperative—has the highest degree centrality and the highest betweenness centrality and likely has significant control over the flow of goods (and other content not represented in this network, like information). Thinking about local food system formation, success, and resilience, it may turn out that having one such node is essential. While I haven't operationalized "success" and "resilience" yet, the local food system in Missoula is generally considered to be fairly robust and, in fact, I coached several nascent local food distributors in other communities who were looking to replicate the success of the Western Montana Growers Cooperative during the COVID-19 pandemic.</span>
<span id="cb60-364"><a href="#cb60-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-365"><a href="#cb60-365" aria-hidden="true" tabindex="-1"></a>I am really interested to see what will surface after I have collected data to analyze other local food systems. That will allow me to determine baselines measurements to compare food systems to. Once I have a dataset in which each local food system (i.e. a network) is its own case and these network features are the variables, I will then operationalize "success" and "resilience" and be able to see which features predict success and resilience. This is critical because the current literature on local food system development tends to be qualitative, leading to a paucity of actionable recommendations to communities looking to create a robust local food system. This project will ultimately contribute to this body of research by providing clear, actionable recommendations that—importantly!—are driven by data.</span>
<span id="cb60-366"><a href="#cb60-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-367"><a href="#cb60-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-368"><a href="#cb60-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-369"><a href="#cb60-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-370"><a href="#cb60-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-371"><a href="#cb60-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-372"><a href="#cb60-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-373"><a href="#cb60-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-374"><a href="#cb60-374" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>